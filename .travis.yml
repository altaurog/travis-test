env:
    global:
        - BRANCH_REF=$(git ls-remote -q --heads | grep $TRAVIS_COMMIT | cut -f2)
        - IS_VISTA=$(git ls-remote -q --heads | grep $TRAVIS_COMMIT | grep refs/heads/vista)
        - IS_RELEASE=$( [[ "$IS_VISTA" && "$TRAVIS_TAG" ]] && echo true )
        - VAR_A=$(./buildenv.sh VAR_A)
        - VAR_B=$(./buildenv.sh VAR_B)
        - VAR_C=$(./buildenv.sh VAR_C)
script:
    - bash getbranch.sh
    - git show-ref
    - git ls-remote origin
    - git ls-remote origin | grep $TRAVIS_COMMIT
    - if [[ "$IS_VISTA" ]]; then echo is vista; fi
    - if [[ "$IS_RELEASE" ]]; then echo release; fi
    - env
